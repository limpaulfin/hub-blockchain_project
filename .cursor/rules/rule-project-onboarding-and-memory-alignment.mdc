---
description: 
globs: 
alwaysApply: false
---
# Quy trÃ¬nh Tiáº¿p nháº­n Dá»± Ã¡n vÃ  Äá»“ng bá»™ Bá»™ nhá»›
*Mod by Asi on 2025-06-18*

## 1. Má»¥c Ä‘Ã­ch

Quy táº¯c nÃ y Ä‘á»‹nh nghÄ©a má»™t quy trÃ¬nh chuáº©n Ä‘á»ƒ AI (em) nhanh chÃ³ng xÃ¢y dá»±ng hiá»ƒu biáº¿t sÃ¢u sáº¯c vá» cáº¥u trÃºc cá»§a má»™t dá»± Ã¡n má»›i vÃ  Ä‘áº£m báº£o ráº±ng sá»± hiá»ƒu biáº¿t Ä‘Ã³ Ä‘Æ°á»£c lÆ°u trá»¯, Ä‘á»“ng bá»™ hÃ³a vá»›i bá»™ nhá»› dÃ i háº¡n (`.memory/`).

Quy trÃ¬nh nÃ y pháº£i Ä‘Æ°á»£c thá»±c thi khi:
- Báº¯t Ä‘áº§u lÃ m viá»‡c trÃªn má»™t project hoÃ n toÃ n má»›i.
- Sau khi thá»±c hiá»‡n má»™t thay Ä‘á»•i lá»›n vá» cáº¥u trÃºc (vÃ­ dá»¥: sau `git pull` hoáº·c `git checkout`).
- Khi AI cáº£m tháº¥y cÃ¡c lá»‡nh liÃªn quan Ä‘áº¿n Ä‘Æ°á»ng dáº«n file báº¯t Ä‘áº§u tháº¥t báº¡i, cho tháº¥y sá»± hiá»ƒu biáº¿t vá» cáº¥u trÃºc Ä‘Ã£ lá»—i thá»i.

## 2. BÆ°á»›c 1: KhÃ¡m phÃ¡ Cáº¥u trÃºc Dá»± Ã¡n ("Progressive Deepening")

Má»¥c tiÃªu lÃ  xÃ¢y dá»±ng má»™t "báº£n Ä‘á»“ tinh tháº§n" (mental map) vá» dá»± Ã¡n mÃ  khÃ´ng bá»‹ quÃ¡ táº£i thÃ´ng tin.

1.  **CÃ¡i nhÃ¬n Tá»•ng quan (Level 1):** Sá»­ dá»¥ng `ls -aF` Ä‘á»ƒ xem táº¥t cáº£ cÃ¡c file vÃ  thÆ° má»¥c á»Ÿ cáº¥p gá»‘c, bao gá»“m cáº£ cÃ¡c má»¥c áº©n.
    Note about this project, and then you update and align with the current situation.
    ls -aF
    ```
2.  **XÃ¡c Ä‘á»‹nh cÃ¡c ThÆ° má»¥c Cá»‘t lÃµi:** Tá»« káº¿t quáº£ trÃªn, xÃ¡c Ä‘á»‹nh cÃ¡c thÆ° má»¥c quan trá»ng. VÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh:
    -   `.cursor/` (Quy táº¯c vÃ  cáº¥u hÃ¬nh AI)
    -   `.memory/` (Bá»™ nhá»› dÃ i háº¡n)
    -   `src/` hoáº·c `lib/` (MÃ£ nguá»“n chÃ­nh)
    -   `tests/` hoáº·c `spec/` (MÃ£ kiá»ƒm thá»­)
    -   `docs/` (TÃ i liá»‡u)
    -   `config/` (CÃ¡c file cáº¥u hÃ¬nh)

3.  **ÄÃ o sÃ¢u cÃ³ Chá»n lá»c (Level 2+):** Sá»­ dá»¥ng `tree -L 2` trÃªn tá»«ng thÆ° má»¥c cá»‘t lÃµi Ä‘Ã£ xÃ¡c Ä‘á»‹nh Ä‘á»ƒ khÃ¡m phÃ¡ cáº¥u trÃºc bÃªn trong cá»§a chÃºng. Ká»¹ thuáº­t nÃ y giá»‘ng nhÆ° "trÆ°á»£t má»™t cá»­a sá»•" (window-sliding) qua tá»«ng khu vá»±c quan trá»ng.
    ```bash
    tree -L 2 .cursor
    tree -L 2 src
    # Láº·p láº¡i cho cÃ¡c thÆ° má»¥c quan trá»ng khÃ¡c...
    ```
4.  **HoÃ n thiá»‡n Báº£n Ä‘á»“:** Láº·p láº¡i bÆ°á»›c 3 cho Ä‘áº¿n khi cÃ³ má»™t bá»©c tranh rÃµ rÃ ng vá» nÆ¡i cÃ¡c thÃ nh pháº§n chÃ­nh cá»§a dá»± Ã¡n Ä‘ang á»Ÿ.

## 3. BÆ°á»›c 2: Äá»‘i chiáº¿u vÃ  Äá»“ng bá»™ vá»›i Bá»™ nhá»›

Sau khi Ä‘Ã£ cÃ³ báº£n Ä‘á»“ cáº¥u trÃºc dá»± Ã¡n, bÆ°á»›c tiáº¿p theo lÃ  Ä‘áº£m báº£o nÃ³ Ä‘Æ°á»£c ghi láº¡i vÃ  cáº­p nháº­t trong bá»™ nhá»›.

1.  **TÃ¬m kiáº¿m Ghi chÃº Cáº¥u trÃºc:** TÃ¬m kiáº¿m trong thÆ° má»¥c `.memory/` má»™t file ghi chÃº chuyÃªn dá»¥ng vá» cáº¥u trÃºc dá»± Ã¡n. TÃªn file quy Æ°á»›c lÃ  `project-structure-map.md`.
    ```bash
    find ./.memory/ -type f -name "project-structure-map.md"
    ```
2.  **Thá»±c hiá»‡n So sÃ¡nh vÃ  Cáº­p nháº­t:**
    -   **TrÆ°á»ng há»£p 1: File tá»“n táº¡i.**
        -   Äá»c ná»™i dung file (`cat ./.memory/project-structure-map.md`).
        -   So sÃ¡nh ná»™i dung Ä‘Ã³ vá»›i cáº¥u trÃºc thá»±c táº¿ Ä‘Ã£ khÃ¡m phÃ¡ á»Ÿ BÆ°á»›c 1.
        -   Náº¿u cÃ³ sá»± khÃ¡c biá»‡t (file/thÆ° má»¥c má»›i, bá»‹ xÃ³a hoáº·c Ä‘á»•i tÃªn), **Báº®T BUá»˜C** pháº£i cáº­p nháº­t láº¡i file `project-structure-map.md` Ä‘á»ƒ pháº£n Ã¡nh Ä‘Ãºng thá»±c táº¿.
    -   **TrÆ°á»ng há»£p 2: File khÃ´ng tá»“n táº¡i.**
        -   Táº¡o má»›i file `.memory/project-structure-map.md`.
        -   Ná»™i dung cá»§a file nÃªn bao gá»“m output cá»§a cÃ¡c lá»‡nh `tree` Ä‘Ã£ cháº¡y, cÃ¹ng vá»›i cÃ¡c ghi chÃº ngáº¯n gá»n giáº£i thÃ­ch vai trÃ² cá»§a tá»«ng thÆ° má»¥c cá»‘t lÃµi.

## 4. Máº«u cho file `project-structure-map.md`

Khi táº¡o má»›i hoáº·c cáº­p nháº­t, file nÃ y nÃªn theo cáº¥u trÃºc sau:

```markdown
# Báº£n Ä‘á»“ Cáº¥u trÃºc Dá»± Ã¡n
*Cáº­p nháº­t láº§n cuá»‘i: YYYY-MM-DD HH:MM*

## Cáº¥u trÃºc Tá»•ng quan
```
# Output cá»§a lá»‡nh tree -L 1 hoáº·c ls -aF á»Ÿ Ä‘Ã¢y
.
â”œâ”€â”€ .cursor/
â”œâ”€â”€ .memory/
â”œâ”€â”€ src/
â””â”€â”€ ...
```

## Chi tiáº¿t cÃ¡c ThÆ° má»¥c Cá»‘t lÃµi

### ğŸ“ .cursor/
*Chá»©a cÃ¡c quy táº¯c (.mdc) vÃ  cáº¥u hÃ¬nh cho AI.*
```
# Output cá»§a lá»‡nh tree -L 2 .cursor á»Ÿ Ä‘Ã¢y
.cursor/
â””â”€â”€ rules/
    â”œâ”€â”€ rule-a.mdc
    â””â”€â”€ rule-b.mdc
```

### ğŸ“ src/
*MÃ£ nguá»“n chÃ­nh cá»§a á»©ng dá»¥ng.*
```
# Output cá»§a lá»‡nh tree -L 2 src á»Ÿ Ä‘Ã¢y
src/
â”œâ”€â”€ components/
â”œâ”€â”€ pages/
â””â”€â”€ utils/
```

*(... tiáº¿p tá»¥c cho cÃ¡c thÆ° má»¥c quan trá»ng khÃ¡c ...)*
